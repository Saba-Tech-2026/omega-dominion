<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸš¢ Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¨Ø­Ø±ÙŠ Ø§Ù„Ø°ÙƒÙŠ</title>

<style>
body {
    background:#050d18;
    color:#00ffcc;
    font-family: monospace;
    padding:20px;
}
h1,h3 { color:#4da6ff; }
button {
    padding:10px 16px;
    background:#00ffcc;
    border:none;
    border-radius:6px;
    font-weight:bold;
    cursor:pointer;
}
.card {
    background:#081424;
    padding:15px;
    border-radius:10px;
    margin-top:15px;
}
pre {
    white-space:pre-wrap;
    color:#e0f7ff;
}
.safe { color:#00ff88; font-weight:bold; }
.warning { color:#ffcc00; font-weight:bold; }
.danger { color:#ff4444; font-weight:bold; }
.footer {
    margin-top:20px;
    opacity:.6;
    font-size:13px;
}
</style>
</head>

<body>

<h1>ğŸš¢ Ù„ÙˆØ­Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¨Ø­Ø±ÙŠ</h1>
<button onclick="loadRadar()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

<div id="dashboard" class="card">â³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>

<div class="card">
    <h3>ğŸ“¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù†Ø©</h3>
    <pre id="cargo">--</pre>
</div>

<div class="card">
    <h3>ğŸ’° Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
    <pre id="finance">--</pre>
</div>

<div class="footer">
    ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ â€¢ Ù†Ø¸Ø§Ù… Ø´Ø­Ù† Ø¨Ø­Ø±ÙŠ Ø°ÙƒÙŠ
</div>

<script>
const API_URL = "http://127.0.0.1:8080/api/radar/MARINE_SHIPPING";

async function loadRadar() {
    try {
        const res = await fetch(API_URL);
        const data = await res.json();

        /* ===== Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ===== */
        document.getElementById("dashboard").innerHTML = `
<b>ğŸš¢ Ø§Ø³Ù… Ø§Ù„Ø³ÙÙŠÙ†Ø©:</b> ${data.ship?.name ?? "-"}<br>
<b>ğŸ§­ Ø§Ù„Ù‚Ø¨Ø·Ø§Ù†:</b> ${data.ship?.captain ?? "-"}<br>
<b>âš“ Ø§Ù„Ø­Ø§Ù„Ø©:</b> ${data.ship?.status ?? "-"}<br><br>

<b>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:</b> ${data.route?.current_port ?? "-"}<br>
<b>ğŸ¯ Ø§Ù„ÙˆØ¬Ù‡Ø©:</b> ${data.route?.destination_port ?? "-"}<br>
<b>â± ETA:</b> ${data.route?.eta_hours ?? "-"} Ø³Ø§Ø¹Ø©<br><br>

<b>ğŸŒ¦ Ø§Ù„Ø·Ù‚Ø³:</b> ${data.environment?.weather ?? "-"}<br>
<b>ğŸŒŠ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬:</b> ${data.environment?.wave_height ?? "-"} Ù…<br>
<b>âš  Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø·Ø±:</b>
<span class="${
    data.environment?.threat === 'SAFE' ? 'safe' :
    data.environment?.threat === 'WARNING' ? 'warning' : 'danger'
}">
${data.environment?.threat ?? "-"}
</span>
`;

        /* ===== Ø§Ù„Ø´Ø­Ù†Ø© ===== */
        document.getElementById("cargo").textContent =
JSON.stringify({
    "Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†Ø©": data.cargo?.type,
    "Ø§Ù„ÙˆØ²Ù† (Ø·Ù†)": data.cargo?.weight_tons,
    "Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª": data.cargo?.containers,
    "Ù…Ø¤Ù…Ù†Ø©": data.cargo?.insured
}, null, 2);

        /* ===== Ø§Ù„Ù…Ø§Ù„ ===== */
        document.getElementById("finance").textContent =
JSON.stringify({
    "Ø±Ø¨Ø­ Ø§Ù„Ø±Ø­Ù„Ø©": data.finance?.trip_profit,
    "Ø§Ù„Ø¹Ù…Ù„Ø©": data.finance?.currency,
    "ØªÙƒÙ„ÙØ© Ø§Ù„ÙˆÙ‚ÙˆØ¯": data.finance?.fuel_cost,
    "Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ÙˆØ§Ù†Ø¦": data.finance?.port_fees,
    "ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­": data.finance?.net_profit
}, null, 2);

    } catch (e) {
        document.getElementById("dashboard").innerHTML =
        "<span class='danger'>âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø³ÙŠØ±ÙØ± Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø¨Ø­Ø±ÙŠ</span>";
    }
}

setInterval(loadRadar, 3000);
loadRadar();
</script>

</body>
</html>